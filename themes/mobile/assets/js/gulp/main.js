$(document).ready(function(){function a(a){if(!a)return!1;var e=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;return e.test(a)?!0:!1}function e(a){for(var e=window.location.search.substring(1),o=e.split("&"),t=0;t<o.length;t++){var n=o[t].split("=");n[0]==a&&$("#add-favoritos").trigger("click")}}$(".input-tel").mask("(99) 9999?9-9999"),$(".home-search #form-general-search").submit(function(){return""===$.trim($("#form-general-search .input-text").val())?!1:void 0}),$(".home-search #form-general-search .input-text").on("focus",function(){$(".home-search #form-general-search").css("z-index","88890"),$(".box-input-focus").fadeIn(300)}),$(".header-search .form-global-search .input-text").on("focus",function(){$(".header-search .form-global-search").css("z-index","88890"),$(".box-input-focus").fadeIn(300)}),$(".box-input-focus").click(function(){$(this).fadeOut(300),$(".home-search #form-general-search, .header-search .form-global-search").css("z-index",""),$(".form-global-search").animate({right:"-100%"},500)}),$(".btn-menu").on("click",function(){$(".main-menu").toggle(1e3)}),$(".link-sub").on("click",function(a){a.preventDefault();var e=$(this).data("link");$$(this).toggleClass("active"),$('.sub-item[data-menu="'+e+'"]').slideToggle(500),$('.sub-item[data-menu="'+e+'"]').css("display","block")}),$(".btn-close-menu").on("click",function(){$(".main-menu").toggle(1e3)});new Swiper(".swiper-container",{direction:"horizontal",loop:!1,pagination:".swiper-pagination",paginationClickable:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev"});$(".single-box").on("click",function(a){a.preventDefault();var e=$(this).data("tabdescription");$$(this).toggleClass("active"),$('.box-description[data-description="'+e+'"]').slideToggle(500)}),$(".info-consorcio .box-content .ico-contato-consorcio").on("click",function(a){a.preventDefault(),$(".box-contato-consorcio").fadeIn(300)}),$(".box-contato-consorcio .btn-close-boxcontato").on("click",function(a){a.preventDefault(),$(".box-contato-consorcio").fadeOut(300)}),$(".btn-video").on("click",function(a){a.preventDefault();var e=$$(this).data("link"),o='<iframe width="320" height="240" src="http://www.youtube.com/embed/'+e+'?autoplay=1" frameborder="0"></iframe>';$(".box-video").append(o),$(".box-video").fadeIn(300)}),$(".btn-close-boxvideo").on("click",function(a){a.preventDefault(),$(".box-video").fadeOut(300),$(".box-video iframe").remove()}),$(".single-footer .btn-contato").on("click",function(a){a.preventDefault(),$(".box-contato").fadeIn(300)}),$(".box-contato-embarcacoes .btn-close-boxcontato").on("click",function(a){a.preventDefault(),$(".box-contato").fadeOut(300)}),$(".single-footer .btn-share").on("click",function(a){a.preventDefault(),$$(this).toggleClass("clicked"),$$(this).hasClass("clicked")?$(".box-share").animate({bottom:"72px"},500):$(".box-share").animate({bottom:"-55px"},500)}),$(".btn-slide-top").on("click",function(){$("html, body").animate({scrollTop:$("body").offset().top},1e3)});var o=$("#flgFavoritou").val();"1"==o&&$("#add-favoritos").addClass("favoritado"),$("#add-favoritos").on("click",function(a){a.preventDefault();var e=$("#isGuest").val();if(0==e)return location.href=Yii.app.createUrl("site/login?url_favorito="+location.href),!1;var o=$("#idEmbarcacao").val();$.ajax($(this).hasClass("favoritado")?{url:Yii.app.createUrl("embarcacoes/desfavoritarEmbarcacao"),data:{id_embarcacao:o},type:"POST",success:function(){$("#add-favoritos").removeClass("favoritado")},error:function(){}}:{url:Yii.app.createUrl("embarcacoes/favoritarEmbarcacao"),data:{id_embarcacao:o},type:"POST",success:function(){$("#add-favoritos").addClass("favoritado"),$(".single-footer .box-favoritado").animate({bottom:"74px"},500),setTimeout(function(){$(".single-footer .box-favoritado").animate({bottom:"-45px"},500,function(){})},3e3)},error:function(){}})}),e("url_favorito"),$(".results-filters .filter-btn").on("click",function(a){a.preventDefault(),$(".box-filters").fadeIn(300)}),$(".box-filters .header-box .btn-close-box").on("click",function(a){a.preventDefault(),$(".box-filters").fadeOut(300)}),$(".box-filters .select-filter #select-modelo").on("change",function(){var a=$("option:selected",this).text();"Selecione"==a?$(".box-filters .slider-filter").css("opacity","1"):$(".box-filters .slider-filter").css("opacity","0.1")});var t=$("#slider-peh");t.noUiSlider({start:[0,200],step:1,range:{min:0,max:200}}),t.Link("lower").to($("#peh-value-lower")),t.Link("upper").to($("#peh-value-upper"));var n=$("#slider-price");n.noUiSlider({start:[0,2e6],step:1e3,connect:!0,range:{min:0,max:2e6},format:wNumb({decimals:3,thousand:"."})}),n.Link("lower").to($("#price-value-lower")),n.Link("upper").to($("#price-value-upper")),n.on({change:function(){var a=$("#price-value-upper").text();"2.000.000"==a?($(".text-filter .text-plus").show(),$(".text-filter .text-ate").hide()):($(".text-filter .text-plus").hide(),$(".text-filter .text-ate").show())}}),$(".results-filters .content-checkbox").on("click",function(){$(".results-filters .content-checkbox").removeClass("active"),$(this).addClass("active");var a=$(this).data("ordem");$("#ordem").val(a),$("#btn-busca").trigger("click")}),$("#btn-busca").on("click",function(){var a=$("#slider-peh").val(),e=String(a),o=e.split(","),t=o[0],n=o[1];$("#pes-min").val(t),$("#pes-max").val(n);var r=$("#slider-price").val(),s=String(r),i=s.split(","),c=i[0],l=i[1];$("#preco-min").val(c),$("#preco-max").val(l),$("#form-search").submit()});var r=1;$(".div-btn-carregar-list").on("click","#carregar-list",function(a){a.preventDefault(),$(".preloader").fadeIn(300),$limit=$(this).data("limit"),data={},data.macro=$(this).data("macro"),data.condicao=$(this).data("condicao"),data.fabricante=$(this).data("fabricante"),data["preco-min"]=$(this).data("preco-min"),data["preco-max"]=$(this).data("preco-max"),data["pes-min"]=$(this).data("pes-min"),data["pes-max"]=$(this).data("pes-max"),data.page=r,data.local=$(this).data("local"),data.buscando=$(this).data("buscando"),data.tipos=$(this).data("tipos"),data.ordem=$(this).data("ordem"),data.ajax=!0,$.ajax({url:Yii.app.createUrl("embarcacoes/busca"),data:data,type:"GET",success:function(a){json=JSON.parse(a.trim()),json.count>0?($(".list-results").append(json.html),r++,json.count<$limit&&$(".div-btn-carregar-list").empty()):$(".div-btn-carregar-list").empty(),$(".preloader").fadeOut(300)},error:function(){alert("Ocorreu um erro inesperado! Tente novamente")}})});var s=1;$(".btn-carregar-empresas").on("click",function(a){a.preventDefault(),$(".preloader").fadeIn(300),$limit=$(this).data("limit"),data={},data.page=s,data.ajax=!0;var e=$(this).data("tipo"),o=Yii.app.createUrl("empresas/EstaleirosIndex");"empresa"==e&&(o=Yii.app.createUrl("empresas/Empresas")),$.ajax({url:o,data:data,type:"GET",success:function(a){json=JSON.parse(a.trim()),json.count>0?($(".results-empresas .container").append(json.html),s++,json.count<$limit&&$(".div-botao-carregar-esta").empty()):$(".div-botao-carregar-esta").empty(),$(".preloader").fadeOut(300)},error:function(){alert("Ocorreu um erro inesperado! Tente novamente")}})});var i=1;$("#btn-carregarmais-anunciante").on("click",function(a){a.preventDefault(),$limit=$(this).data("limit"),$(".preloader").fadeIn(300),data={},data.page=i,data.usuarios_id=$("#idUsuarioDonoEmbarc").val(),data.embarcacoes_id=$("#idEmbarcacao").val(),$.ajax({url:Yii.app.createUrl("embarcacoes/maisDesseAnunciante_mobile"),data:data,type:"GET",success:function(a){json=JSON.parse(a.trim()),json.count>0?($("#div-maisdesse-anunciante").append(json.html),i++,json.count<$limit&&$("#btn-carregarmais-anunciante").hide()):$("#btn-carregarmais-anunciante").hide(),$(".preloader").fadeOut(300)},error:function(){alert("Ocorreu um erro inesperado! Tente novamente")}})}),$(".ico-search-header").on("click",function(){$(".form-global-search").animate({right:"0px"},500),$(".box-input-focus").fadeIn(300),$(".header-search .form-global-search").css("z-index","88890"),setTimeout(function(){$(".form-global-search .input-text").focus()},500)}),$$(".header-filters select").on("change",function(){$$(".second-box .input-submit").trigger("click")}),$(".box-actions .action-email").on("click",function(a){a.preventDefault(),$(".box-contato").fadeIn(300)}),$(".box-contato-empresa .btn-close-boxcontato").on("click",function(a){a.preventDefault(),$(".box-contato").fadeOut(300)}),$(".tabs-estaleiro .tab .link-tab").on("click",function(a){a.preventDefault(),$(".tabs-estaleiro .tab .link-tab").removeClass("active"),$(this).addClass("active");var e=$(this).data("tab");$(".more-infos .tab-slide").slideUp(500),$('.more-infos .tab-slide[data-tab="'+e+'"]').slideDown(500)}),$(".box-contato-estaleiro .btn-close-boxcontato").on("click",function(a){a.preventDefault(),$(".box-contato-estaleiro").fadeOut(300)}),$(".link-home-contato").on("click",function(){$(".box-contato-home").fadeIn(300)}),$(".box-contato-home .btn-close-boxcontato").on("click",function(a){a.preventDefault(),$(".box-contato-home").fadeOut(500)}),$(".box-contato-sucess .btn-ok").on("click",function(){$(".box-contato-sucess").fadeOut(300)}),$("#esqeceu-senha").on("click",function(){$(".box-lostpassword").fadeIn(300)}),$(".box-lostpassword .btn-close-boxlostpassword, .box-lostpassword .btn-ok-closelostpassword").on("click",function(){$(".box-lostpassword").fadeOut(300)}),$("#btn-enviar-email-esqeceu-senha").on("click",function(e){e.preventDefault();var o=$("#esqeceu-senha-email").val();o&&a(o)?$.ajax({url:Yii.app.createUrl("site/esqeceuSenha"),data:{email:o},type:"post",success:function(a){"-1"!=a.trim()?($(".box-lostpassword #btn-enviar-email-esqeceu-senha, .box-lostpassword #esqeceu-senha-email").hide(),$(".box-lostpassword .btn-ok-closelostpassword").show(),$(".box-lostpassword .text-msg").text("E-mail enviado com sucesso")):$("#erro-mail-lostpassword").text("Ocorreu um erro, tente novamente")},error:function(){}}):$("#erro-mail-lostpassword").text("E-mail inválido!")}),$("#btn-contato").on("click",function(e){e.preventDefault();var o=$("#nome-contato").val(),t=$("#email-contato").val(),n=$("#telefone-contato").val(),r=$("#mensagem-contato").val(),s=!0;""==o||""==t||""==r||""==n?($("#erro-contato").removeClass("send-sucess"),$("#erro-contato").text("Insira os campos necessários!"),s=!1):(a(t)||(s=!1,$("#erro-contato").text("E-mail inválido!")),s&&$.ajax({url:Yii.app.createUrl("contatos/contatoBombarco"),data:{nome_rem:o,email_rem:t,telefone_rem:n,mensagem:r},type:"POST",success:function(a){"1"==a.trim()?($(".box-contato-sucess").fadeIn(500),$(".box-contato-home").hide(),$("#nome-contato").val(""),$("#email-contato").val(""),$("#telefone-contato").val(""),$("#mensagem-contato").val("")):($("#erro-contato").removeClass("send-sucess"),$("#erro-contato").text("Erro ao enviar a mensagem."))},error:function(){$("#erro-contato").removeClass("send-sucess"),$("#erro-contato").text("Erro ao enviar a mensagem.")}}))}),$("#btn-contato-empresa").on("click",function(e){e.preventDefault();var o=$("#nome-contato-empresa").val(),t=$("#email-contato-empresa").val(),n=$("#telefone-contato-empresa").val(),r=$("#mensagem-contato-empresa").val(),s=$("#flgEstaleiro").val(),i=!0;""==o||""==t||""==n||""==r?($("#erro-contato-empresa").removeClass("send-sucess"),$("#erro-contato-empresa").text("Preencha as informações!"),i=!1):(a(t)||($("#erro-contato-empresa").removeClass("send-sucess"),$("#erro-contato-empresa").text("E-mail inválido!"),i=!1),i&&($(".preloader").css("z-index","9999"),$.ajax({type:"post",data:{nome_rem:o,email_rem:t,telefone_rem:n,mensagem:r,email_empresa:$("#email_empresa").val(),razao:$("#razao").val(),usuarios_id_dest:$("#usuarios_id").val(),flgEstaleiro:s},url:Yii.app.createUrl("contatos/contatoEmpresa"),success:function(a){return"-3"==a.trim()?($("#erro-contato-empresa").removeClass("send-sucess"),$("#erro-contato-empresa").text("É necessário realizar o login para mandar a mensagem."),!1):"-5"==a.trim()?($("#erro-contato-empresa").removeClass("send-sucess"),$("#erro-contato-empresa").text("Não é possível enviar a si mesmo."),!1):"1"==a.trim()?($(".box-contato-sucess").fadeIn(500),$(".box-contato-empresa").hide(),!1):($("#erro-contato-empresa").removeClass("send-sucess"),void $("#erro-contato-empresa").text("Erro ao enviar a messagem!"))},error:function(){$("#erro-contato").text("Ocorreu um erro inesperado ao enviar o email. Tente mais tarde.")}})))}),$("#btn-contato-anunciante").on("click",function(e){e.preventDefault();var o=$("#nome-contato-anunciante").val(),t=$("#email-contato-anunciante").val(),n=$("#telefone-contato-anunciante").val(),r=$("#mensagem-contato-anunciante").val(),s=!0,i=$("#idUsuarioDonoEmbarc").val();if(""==o||""==t||""==n||""==r)$("#erro-contato-anunciante").text("Insira os campos necessários!"),s=!1;else if(a(t)||($("#erro-contato-anunciante").text("Email inválido!"),s=!1),s){$(".preloader").fadeIn(300);var c=Yii.app.createUrl("contatos/mailAnunciante");$.ajax({url:c,data:{nome_rem:o,email_remetente:t,telefone:n,mensagem:r,idUsuarioDonoEmbarc:i,idEmbarcacao:$("#idEmbarcacao").val(),emailEmbarcacao:$("#emailEmbarcacao").val(),resposta:$("#resposta").val()},type:"POST",success:function(a){"-3"==a.trim()?$("#erro-contato-anunciante").text("É preciso realizar o login para enviar mensagens."):"-5"==a.trim()?$("#erro-contato-anunciante").text("Não é possível enviar uma mensagem a si mesmo."):"-1"!=a.trim()&&"-5"!=a.trim()&&"-3"!=a.trim()?($(".box-contato-sucess").fadeIn(500),$(".box-contato-embarcacoes").hide(),$("#nome-contato-anunciante").val(""),$("#email-contato-anunciante").val(""),$("#telefone-contato-anunciante").val(""),$("#mensagem-contato-anunciante").val("")):$("#erro-contato-anunciante").text("Erro ao enviar a mensagem!"),$(".preloader").fadeOut(300)},error:function(){$("#erro-contato-anunciante").text("Erro ao enviar a mensagem!"),$(".preloader").fadeOut(300)}})}}),$("#btn-contato-anunciar-estaleiro").on("click",function(e){e.preventDefault();var o=$("#nome-contato-anunciar-estaleiro").val(),t=$("#email-contato-anunciar-estaleiro").val(),n=$("#telefone-contato-anunciar-estaleiro").val(),r=$("#mensagem-contato-anunciar-estaleiro").val(),s=!0;""==o||""==t||""==r||""==n?($("#erro-contato-anunciar-estaleiro").removeClass("send-sucess"),$("#erro-contato-anunciar-estaleiro").text("Insira os campos necessários!"),s=!1):(a(t)||(s=!1,$("#erro-contato-anunciar-estaleiro").text("E-mail inválido!")),s&&$.ajax({url:Yii.app.createUrl("contatos/contatoBombarco"),data:{nome_rem:o,email_rem:t,telefone_rem:n,mensagem:r},type:"POST",success:function(a){"1"==a.trim()?($(".box-contato-sucess").fadeIn(500),$("#erro-contato-anunciar-estaleiro").text(""),$("#nome-contato-anunciar-estaleiro").val(""),$("#email-contato-anunciar-estaleiro").val(""),$("#telefone-contato-anunciar-estaleiro").val(""),$("#mensagem-contato-anunciar-estaleiro").val("")):($("#erro-contato-anunciar-estaleiro").removeClass("send-sucess"),$("#erro-contato-anunciar-estaleiro").text("Erro ao enviar a mensagem."))},error:function(){$("#erro-contato-anunciar-estaleiro").removeClass("send-sucess"),$("#erro-contato-anunciar-estaleiro").text("Erro ao enviar a mensagem.")}}))}),$("#btn-contato-anunciar-banner").on("click",function(e){e.preventDefault();var o=$("#nome-contato-anunciar-banner").val(),t=$("#email-contato-anunciar-banner").val(),n=$("#telefone-contato-anunciar-banner").val(),r=$("#mensagem-contato-anunciar-banner").val(),s=!0;""==o||""==t||""==r||""==n?($("#erro-contato-anunciar-banner").removeClass("send-sucess"),$("#erro-contato-anunciar-banner").text("Insira os campos necessários!"),s=!1):(a(t)||(s=!1,$("#erro-contato-anunciar-banner").text("E-mail inválido!")),s&&$.ajax({url:Yii.app.createUrl("contatos/contatoBombarco"),data:{nome_rem:o,email_rem:t,telefone_rem:n,mensagem:r},type:"POST",success:function(a){"1"==a.trim()?($(".box-contato-sucess").fadeIn(500),$("#erro-contato-anunciar-banner").text(""),$("#nome-contato-anunciar-banner").val(""),$("#email-contato-anunciar-banner").val(""),$("#telefone-contato-anunciar-banner").val(""),$("#mensagem-contato-anunciar-banner").val("")):($("#erro-contato-anunciar-banner").removeClass("send-sucess"),$("#erro-contato-anunciar-banner").text("Erro ao enviar a mensagem."))},error:function(){$("#erro-contato-anunciar-banner").removeClass("send-sucess"),$("#erro-contato-anunciar-banner").text("Erro ao enviar a mensagem.")}}))}),$("body").on("submit","#form_lbox",function(e){e.preventDefault(),$data=$(this).serialize();var o=$("#form-1-ag-lb").val(),t=$("#finan_email").val(),n=$("#finan_phone").val(),r=!0;""==o||""==t||""==n?($("#erro-contato-consorcio").removeClass("send-sucess"),$("#erro-contato-consorcio").text("Insira os campos necessários!"),r=!1):(a(t)||(r=!1,$("#erro-contato-consorcio").text("E-mail inválido!")),r&&$.ajax({url:$(this).attr("action"),data:$data,type:"POST",success:function(a){json=$.parseJSON(a),1==json.ok?($(".box-contato-sucess").fadeIn(500),$(".box-contato-consorcio").hide(),$("#form-1-ag-lb").val(""),$("#finan_email").val(""),$("#finan_phone").val("")):($("#erro-contato-consorcio").removeClass("send-sucess"),$("#erro-contato-consorcio").text("Erro ao enviar a mensagem."))},error:function(){$("#erro-contato-consorcio").removeClass("send-sucess"),$("#erro-contato-consorcio").text("Erro ao enviar a mensagem.")}}))})});