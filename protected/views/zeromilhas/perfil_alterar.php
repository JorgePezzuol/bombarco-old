<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="author" content="Bombarco - Líder em Negócios Náuticos" />
  <meta name="keywords" content="bombarco, zeromilhas, nautico, lider, marinha" />
          <meta name="geo.region" content="BR-SP" />
        <meta name="geo.placename" content="Brasil" />
        <meta name="geo.position" content="-14.2392976,-53.1805017,4z" />
        <meta name="ICBM" content="-14.2392976,-53.1805017,4z" />
        <meta name="robots" content="follow,index" />
  <link rel="shortcut icon" href="/favicon.ico?e=23" />
  <title>Catálogo Bombarco | Perfil</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no" />
  <?php Yii::app()->getClientScript()->registerCssFile(Yii::app()->baseUrl . '/css/zeromilhas/bootstrap.min.css?e=2333'); ?>
  <?php Yii::app()->getClientScript()->registerCssFile(Yii::app()->baseUrl . '/css/zeromilhas/fancybox.css?e=23'); ?>
  <?php Yii::app()->getClientScript()->registerCssFile(Yii::app()->baseUrl . '/css/zeromilhas/fancybox-buttons.css?e545');?>
  <?php Yii::app()->getClientScript()->registerCssFile(Yii::app()->baseUrl . '/css/zeromilhas/font-awesome.min.css?e1');?>
  <?php Yii::app()->getClientScript()->registerCssFile(Yii::app()->baseUrl . '/css/zeromilhas/tether.min.css?1212');?>
  <?php Yii::app()->getClientScript()->registerCssFile(Yii::app()->baseUrl . '/css/zeromilhas/reset.css');?>
  <?php Yii::app()->getClientScript()->registerCssFile(Yii::app()->baseUrl . '/css/zeromilhas/bjqs.css?e=234');?>
  <?php Yii::app()->getClientScript()->registerCssFile(Yii::app()->baseUrl . '/css/zeromilhas/style.css?e=22223');?>
  <?php Yii::app()->getClientScript()->registerCssFile(Yii::app()->baseUrl . '/css/zeromilhas/responsive.css?e=3333f');?>
  <?php Yii::app()->getClientScript()->registerCssFile(Yii::app()->baseUrl . '/css/zeromilhas/jquery-ui.css?e=234');?>

  

  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/modernizr.js?e=344', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/jquery-3.2.1.min.js?e=344', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/tether.min.js?e=344', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/bootstrap.min.js?e=344', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/counter.min.js?e=344', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/numeral.min.js?e=344', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/fancybox.js?e=344', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/fancybox-buttons.js?e=344', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/jquery.ez-plus.js?e=2344', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/jquery-ui.js?e=1111', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/owl.carousel.min.js?e=1344', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/bjqs.js?e=344', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/maskedinput.js?e=344', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/bootstrap-slider.min.js?e=344', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/modernizr.js?e=344', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/scripts.js?e=123', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/vue-2.5.js?e=344', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/axios-0.17.js?e=344', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/js_zeromilhas/jquery.lightbox_me.js', CClientScript::POS_END); ?>
  <?php Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/jquery-mask.js', CClientScript::POS_END); ?>

<!-- Permite que o IE interprete as tags do HTML 5 -->
<!--[if lt IE 9]>
<script src="media/http://html5shim.googlecode.com/svn/trunk/html5.js?e=344"></script>
<link rel="stylesheet" type="text/css" href="http://domain.tld/path/ie-specific.css" />
<![endif]-->

<!--Fonts-->
<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,600,800,900" rel="stylesheet">

    <?php
        $this->renderPartial('analytics');
    ?>

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

</head> <!-- FIM HEAD -->

<body id="topo" class="side-collapse-container">

    <div id="app">

   <?php
        $this->renderPartial('_menu');
    ?>


 <?php
    $form=$this->beginWidget('CActiveForm', array(
            'id'=>'form-atualizar-dados',
            //'enableAjaxValidation'=>true,
            'action'=>$this->createUrl('usuarios/atualizarDadosPessoais', array('id'=>$model->id)),
           // 'enableClientValidation'=>true,
         
    ));
?>
  
    <section id="titulo-subpagina">
    <div class="container">
      <div class="row">
        <div class="col-lg-12 col-sm-12">
          <h1>Perfil
            <img src="<?php echo Yii::app()->baseUrl . '/img_zeromilhas/icones/ico_titulo.png'?>" alt="Titulo" />
          </h1>
          <p>Mantenha suas informações atualizadas e gere mais negócios.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Miolo -->
  <section id="miolo">
    <div class="container">
      <div class="row">
        <div class="col-lg-12 col-sm-12">
             <ul class="nav nav-pills mb-3" id="menu-tabs" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" id="perfil-tab" href="<?php echo Yii::app()->createUrl("zeromilhas/perfil", array("id"=>Yii::app()->user->id)); ?>" aria-controls="tab-perfil" aria-selected="true">Perfil</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="embarcacoes-tab" href="<?php echo Yii::app()->createUrl("zeromilhas/planos"); ?>" aria-controls="tab-embarcacoes" aria-selected="false">Meus Modelos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="embarcacoes-tab" href="<?php echo Yii::app()->createUrl("embarcacoes/lista?v=0&e=anuncios"); ?>" aria-controls="tab-embarcacoes" aria-selected="false"> Classificados</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="dashboard-tab" href="<?php echo Yii::app()->createUrl("dashboard"); ?>" aria-controls="tab-dashboard" aria-selected="false">Dashboard</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="mensagens-tab" href="<?php echo Yii::app()->createUrl("zeromilhas/mensagens"); ?>" aria-controls="tab-mensagens" aria-selected="false">Mensagens</a>
            </li>
                        <li class="nav-item">
              <a class="nav-link" id="mensagens-tab" href="<?php echo Yii::app()->createUrl("zeromilhas/pagamento"); ?>" aria-controls="tab-mensagens" aria-selected="false">Pagamentos</a>
            </li>
          </ul>
          <div class="tab-content" id="pills-tabContent">
            <div class="tab-pane fade show active" id="tab-perfil" role="tabpanel" aria-labelledby="tab-perfil">
              <div class="row">
                <div class="col-lg-6 col-sm-12">
                  <div class="form-perfil bg-faded atualizacao">
                    <h3>Dados de acesso</h3>
                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text" id="campo-email">E-mail: </span>
                      </div>
                      <input type="email" class="form-control campo-dados" placeholder="" id="email" aria-label="E-mail" aria-describedby="campo-email" value="<?php echo $model->email; ?>" >
                    </div>
                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text" id="campo-senha">Senha: </span>
                      </div>
                      <input type="password" class="form-control campo-dados" id="senha" placeholder="" aria-label="Senha" aria-describedby="campo-senha" value="1234567890" >
                    </div>
                    <a href="#" class="btn btn-verde pull-right btn-atualizar-senha" >atualizar</a>
                  </div>
                </div>
                <div class="col-lg-6 col-sm-12">
                  <div class="form-perfil bg-faded atualizacao">
                    <h3>Dados Pessoais</h3>
                    <div class="row mb-3">
                        <?php 

                            if($model->logo != "" && $model->logo != null) {
                                $imagem = $model->logo;
                            }
                            else {
                                $imagem = 'addfoto.png';
                            }
                        ?>
                      <div class="col-lg-3 col-sm-12 foto-perfil">
                         <?php echo CHtml::image(Yii::app()->request->baseUrl.'/public/usuarios/'.$imagem,
                     "logo", array('id'=>'logo-img', 'class'=>'img-upload img-turbinada img-preview'))?>
                        <?php
                            echo CHtml::activeFileField($model, 'logo', array('style'=>'display: none;', 'name'=>'logo', 'id'=>'logo-file'));
                        ?>
                      </div>
                      <div class="col-lg-9 col-sm-12 dados-edicao">
                        <a class="btn btn-link" href="#" id="btn-editar-logo">Editar</a>
                        <span class="pipe">|</span>
                        <?php
                            if ($imagem != "addfoto.png") {
                                echo '<a href="#" id="remover-logo" class="btn btn-link">Excluir</a>';
                            }
                        ?>
                        <p>
                          Formatos aceitos: JPEG/PNG<br/>
                          Tamanho máximo: 1MB<br/>
                          Tamanho ideal: 100px X 100px
                        </p>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-lg-12 col-sm-12">

                        <?php if($model->pessoa == 'F'): ?>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="campo-nome">Nome: </span>
                          </div>
                          <?php echo $form->textField($model, 'nome', array("class"=> "form-control campo-dados", 'maxlength' => 100)); ?>
                        </div>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="campo-nome">Sobrenome: </span>
                          </div>
                          <?php echo $form->textField($model, 'sobrenome', array("class"=> "form-control campo-dados", 'maxlength' => 100)); ?>
                        </div>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="campo-cpf">CPF: </span>
                          </div>
                          <?php echo $form->textField($model, 'cpf', array("class"=> "form-control campo-dados", 'maxlength' => 45)); ?>
                        </div>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="campo-dtnasc">Data de Nascimento: </span>
                          </div>
                          <?php echo $form->textField($model, 'data_nascimento', array("class"=> "form-control campo-dados", 'value'=>Usuarios::formatDateTimeToView($model->data_nascimento))); ?>
                        </div>
                        <?php else: ?>
                            <?php if(isset($model->nomefantasia)): ?>
                            <div class="input-group mb-3">
                              <div class="input-group-prepend">
                                <span class="input-group-text" id="campo-nome">Nome Fantasia: </span>
                              </div>
                              <?php echo $form->textField($model, 'nomefantasia', array("class"=> "form-control campo-dados", 'maxlength' => 100)); ?>
                            </div>
                            <?php endif; ?>
                            <div class="input-group mb-3">
                              <div class="input-group-prepend">
                                <span class="input-group-text" id="campo-nome">Razão Social: </span>
                              </div>
                              <?php echo $form->textField($model, 'razaosocial', array("class"=> "form-control campo-dados", 'maxlength' => 100)); ?>
                            </div>
                            <div class="input-group mb-3">
                              <div class="input-group-prepend">
                                <span class="input-group-text" id="campo-cpf">CNPJ: </span>
                              </div>
                              <?php echo $form->textField($model, 'cnpj', array("class"=> "form-control campo-dados", 'maxlength' => 45)); ?>
                            </div>
                        <?php endif; ?>
                        <div class="row">
                          <div class="col-lg-8">
                            <div class="input-group mb-3">
                              <div class="input-group-prepend">
                                <span class="input-group-text" id="campo-endereco">CEP: </span>
                              </div>
                              <?php echo $form->textField($model, 'cep', array("class"=> "form-control campo-dados", 'maxlength' => 100)); ?>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-lg-8">
                            <div class="input-group mb-3">
                              <div class="input-group-prepend">
                                <span class="input-group-text" id="campo-endereco">Endereço: </span>
                              </div>
                              <?php echo $form->textField($model, 'endereco', array("class"=> "form-control campo-dados", 'maxlength' => 150)); ?>
                            </div>
                          </div>
                          <div class="col-lg-4">
                            <div class="input-group mb-3">
                              <div class="input-group-prepend">
                                <span class="input-group-text" id="campo-numero">Número: </span>
                              </div>
                              <?php echo $form->textField($model, 'numero', array("class"=> "form-control campo-dados", 'maxlength' => 20)); ?>
                            </div>
                          </div>
                        </div>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="campo-bairro">Bairro: </span>
                          </div>
                          <?php echo $form->textField($model, 'bairro', array("class"=> "form-control campo-dados", 'maxlength' => 150)); ?>
                        </div>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="campo-complemento">Complemento: </span>
                          </div>
                          <?php echo $form->textField($model, 'complemento', array("class"=> "form-control campo-dados", 'maxlength' => 45)); ?>
                        </div>
                        <div class="row">
                          <div class="col-lg-6">
                            <div class="input-group mb-3">
                              <div class="input-group-prepend">
                                <span class="input-group-text" id="campo-estado">Estado: </span>
                              </div>
                              <select style="height: 80px !important;" class="w-80" id="Usuarios_estados_id" name="Usuarios[estados_id]">
                                    <?php $estados = Estados::model()->findAll(); ?>
                                    <?php foreach($estados as $e): ?>
                                        <?php if($model->estados_id == $e->id): ?>  
                                                <option selected value="<?php echo $e->id;?>"><?php echo $e->nome;?></option>
                                        <?php else: ?>
                                                <option value="<?php echo $e->id;?>"><?php echo $e->nome;?></option>
                                        <?php endif; ?> 
                                        
                                    <?php endforeach; ?>
                                </select>
                            </div>
                          </div>
                          <div class="col-lg-6">
                            <div class="input-group mb-3">
                              <div class="input-group-prepend">
                                <span class="input-group-text" id="campo-cidade">Cidade: </span>
                              </div>
                              <?php 

                                    if($model->cidades != null) {
                                        echo $form->dropDownList($model,'cidades_id', 

                                            GxHtml::listDataEx(Cidades::model()->findAllAttributes(null, true, 'estados_id=:estado', array(':estado'=>$model->estados->id), array('class'=>'w-80'))));
                                            
                                    }
                                    else {
                                        echo $form->dropDownList($model,'cidades_id',
                                            Cidades::model()->findAllAttributes(null, true), array('class'=>'w-80'));
                                    }
                                    
                                ?>
                            </div>
                          </div>
                        </div>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="campo-tel">Telefone: </span>
                          </div>
                          <?php echo $form->textField($model, 'telefone', array("class"=> "form-control campo-dados", 'mask' => '(99) 99999.9999' , 'maxlength' => 45)); ?>
                        </div>

                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="campo-tel">Celular: </span>
                          </div>
                          <?php echo $form->textField($model, 'celular', array("id"=>"celular", "class"=> "form-control campo-dados", 'mask' => '(99) 99999.9999' , 'maxlength' => 45)); ?>
                        </div>

                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="campo-tel">Nextel: </span>
                          </div>
                          <?php echo $form->textField($model, 'nextel', array("class"=> "form-control campo-dados", 'mask' => '(99) 99999.9999' , 'maxlength' => 45)); ?>
                        </div>

                        <a href="#" class="btn btn-verde pull-right" id="atualizar-dados-pessoais" >atualizar</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="tab-embarcacoes" role="tabpanel" aria-labelledby="tab-embarcacoes"> embarcações </div>
            <div class="tab-pane fade" id="tab-dashboard" role="tabpanel" aria-labelledby="tab-dashboard"> dashboard </div>
            <div class="tab-pane fade" id="tab-mensagens" role="tabpanel" aria-labelledby="tab-mensagens"> mensagens </div>
          </div>


        </div>
      </div>


    </div>
  </section>

  <input type="hidden" id="idUsuario" value="<?php echo $model->id; ?>"/>
  <?php $this->endWidget();?>


  <a href="#topo" class="volta-topo" title="Topo"><i class="fa fa-angle-up"></i></a>


</div>
</body>
    
    <script>
        $(document).ready(function(){

               /* Executa a requisição quando o campo CEP perder o foco */
            $('#Usuarios_cep').blur(function () {

                /* Configura a requisição AJAX */
                $.ajax({
                    url: Yii.app.createUrl('anuncios/consultarCep'), /* URL que será chamada */
                    type: 'POST', /* Tipo da requisição */

                    //data: 'cep=' + $('#Empresas_cep').val(), /* dado que será enviado via POST */
                    data: {cep: $("#Usuarios_cep").val()},
                    dataType: 'json', /* Tipo de transmissão */
                    success: function (data) {

                        if (data.sucesso == 1) {

                            $('#Usuarios_endereco').val(data.rua);
                            $('#Usuarios_bairro').val(data.bairro);
                            $('#Usuarios_numero').focus();
                        }
                    }
                });

            });

            var maskBehavior = function (val) {
                return val.replace(/\D/g, '').length === 11 ? '(00) 00000-0000' : '(00) 0000-00009';
            },
            options = {onKeyPress: function (val, e, field, options) {
                    field.mask(maskBehavior.apply({}, arguments), options);
                }
            };

            $("#Usuarios_cpf").mask("999.999.999-99");
            $("#Usuarios_telefone").mask("(99) 9999-9999");
            $("#Usuarios_cnpj").mask('99.999.999/9999-99');

            $("#celular").mask(maskBehavior, options);
            $("#Usuarios_data_nascimento").mask("99/99/9999");

            // ajax preencher cidades a partir do estado
            $("#Usuarios_estados_id").on("change", function () {

                var estado_id = $(this).val();

                $.ajax({
                    url: Yii.app.createUrl('utils/loadCities2'),
                    type: 'post',
                    data: {estados_id: estado_id},
                    success: function (resp) {

                        $("#Usuarios_cidades_id").empty();
                        var selectDefault = $('<option selected="selected" value="">selecione</option>');
                        $("#Usuarios_cidades_id").append(selectDefault).trigger("create");
                        var cidades = JSON.parse(resp.trim());

                        for (var i = 0; i < cidades.length; i++) {

                            var option = $('<option value="' + cidades[i].id + '">' + cidades[i].nome + '</option>');
                            $("#Usuarios_cidades_id").append(option).trigger("create");
                        }
                    },
                    error: function (x, h, z) {

                    }
                });
            });

            $(".btn-atualizar-senha").on("click", function(e) {

                e.preventDefault();

                var s = confirm("Confirmar alteração de senha?");

                if(s == true) {

                    $.ajax({
                        url: Yii.app.createUrl('usuarios/alterarSenha/' + $("#idUsuario").val()),
                        type: 'post',
                        data: {
                            senha: $("#senha").val(),
                            confirmaSenha: $("#senha").val()
                        },
                        beforeSend: function () {

                            if ($("#senha").val() == "") {
                                alert("Favor preencha o campo para alterar a senha");
                                return false;
                            }
                        },
                        success: function (resp) {

                            if (resp.trim() == '1') {

                                alert("Senha alterada com sucesso");
                            }

                            else {
                                alert("Ocorreu um erro inesperado. Tente mais tarde");
                            }

                        },
                        error: function (x, h, z) {
                            alert("Ocorreu um erro inesperado. Tente mais tarde");
                        }
                    });
                }

            });

            $("#atualizar-dados-pessoais").on("click", function (e) {
                e.preventDefault();

                if($("#Usuarios_cpf").val() == "") {
                    $("#Usuarios_cpf").css("border-color", "red");
                    return false;
                }

                var id = $("#idUsuario").val();

                $.ajax({
                    url: Yii.app.createUrl('usuarios/atualizarDadosPessoais/' + id),
                    type: 'post',
                    data: $("#form-atualizar-dados").serialize(),
                    success: function (resp) {

                        if (resp.trim() != '1') {
                            alert("Ocorreu um erro inesperado. Tente mais tarde");
                        }
                        else {

                            $("#campos-pf-liberado").fadeOut("fast");
                            $("#campos-pf-travado").fadeIn("fast");
                            alert("Dados alterados com sucesso");
                            location.reload();

                        }
                    },
                    error: function (x, h, z) {
                        alert("Ocorreu um erro inesperado. Tente mais tarde");
                    }
                });

            });


            $("#remover-logo").on("click", function (e) {

                e.preventDefault();

                var s = confirm("Deseja excluir o logo?");

                if(s) {
                                  $.ajax({    
                    url: Yii.app.createUrl('usuarios/alterarLogo'),
                    type: 'post',
                    data: {
                        excluirlogo: 1
                    },
                    success: function (resp) {

                        $("#logo-img").attr("src", Yii.app.createUrl('public/usuarios/addfoto.png'));
                        $("#remover-logo").hide();

                        setTimeout(function(){ location.reload(); }, 2000);
                        

                    },
                    error: function (x, h, z) {
                        alert("Ocorreu um erro inesperado. Tente novamente mais tarde");
                    }
                });
                }


            });

            $("#logo-img, #btn-editar-logo").on("click", function (e) {
                e.preventDefault();
                $("#logo-file").trigger("click");
            });

            $('#logo-file').on("change", function () {

                var nome = $(this)[0].files[0].name;

                var fd = new FormData();
                fd.append("logo", $(this)[0].files[0]);

                $.ajax({
                    url: Yii.app.createUrl('usuarios/alterarLogo'),
                    type: 'POST',
                    cache: false,
                    data: fd,
                    processData: false,
                    contentType: false,
                    success: function (resp) {


                        if (resp.trim() == "-1") {
                           alert("Foto não permitida ou ultrapassou o limite! Formatos aceitos: JPEG / PNG . Tamanho Máximo 1 MB - Prefira Imagens na horizontal.");
                        }

                        else {

                            $("#logo-img").attr("src", Yii.app.createUrl('public/usuarios/' + resp.trim()));

                        }


                    },
                    error: function (x, h, z) {
                        alert("Ocorreu um erro inesperado. Tente novamente mais tarde");
                    }
                });
            });
        });
    </script>
    
</html>
